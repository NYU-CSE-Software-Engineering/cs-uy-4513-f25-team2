<h1 class="display-5 mb-4">Submit Feedback</h1>

<div class="card shadow">
  <div class="card-body p-4">
    <% if @feedback.errors.any? %>
      <div class="alert alert-danger" role="alert">
        <strong>Please fix the following errors:</strong>
        <ul class="mb-0 mt-2">
          <% @feedback.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <p class="lead">
      Tutor:
      <strong>
        <%= @tutor_session.tutor.learner.first_name %>
        <%= @tutor_session.tutor.learner.last_name %>
      </strong>
    </p>

    <%= form_with model: @feedback,
                  url: session_feedbacks_path(@tutor_session),
                  local: true,
                  class: "needs-validation" do |f| %>
      <div class="mb-3">
        <p class="form-label">Rating</p>
        <div class="rating-group">
          <% (1..5).each do |n| %>
            <div class="form-check form-check-inline">
              <%= f.radio_button :rating, n, id: "rating_#{n}", class: "form-check-input", required: true %>
              <%= label_tag "rating_#{n}", n.to_s, class: "form-check-label" %>
            </div>
          <% end %>
        </div>
      </div>

      <div class="mb-3">
        <%= f.label :comment, "Comment", class: "form-label" %><br>
        <%= f.text_area :comment, class: "form-control", rows: 5, placeholder: "Enter your comments here...", required: true %>
      </div>

      <div class="d-grid">
        <%= f.submit "Submit Feedback", class: "btn btn-primary btn-lg" %>
      </div>
    <% end %>
  </div>
</div>
