<h1>My Upcoming Sessions</h1>

<% if notice.present? %>
  <p class="notice"><%= notice %></p>
<% end %>

<% if alert.present? %>
  <p class="alert"><%= alert %></p>
<% end %>

<% if @upcoming_bookings.any? %>
  <ul class="sessions-list upcoming-sessions">
    <% @upcoming_bookings.each do |booking| %>
      <% session = booking.tutor_session %>
      <li class="session">
        <p><strong>Subject:</strong> <%= session.subject.name %></p>
        <p>
          <strong>Tutor:</strong>
          <%= session.tutor.learner.first_name %>
          <%= session.tutor.learner.last_name %>
        </p>
        <p>
          <strong>Time:</strong>
          <%= session.start_at.utc.iso8601 %> â€“ <%= session.end_at.utc.iso8601 %>
        </p>

        <p><strong>Status:</strong> <%= session.status %></p>

        <% if session.meeting_link.present? %>
          <p>
            <strong>Meeting link:</strong>
            <%= link_to 'Join Session', session.meeting_link, target: '_blank' %>
          </p>
        <% end %>

        <p>
          <%= link_to 'Cancel', cancel_learner_session_path(booking) %>
        </p>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>You have no upcoming sessions.</p>
<% end %>

<p>
  <%= link_to 'View past sessions', past_learner_sessions_path %>
</p>